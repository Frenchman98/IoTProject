<html>
<head>
	<title>SunRunr Register A Device</title>
	<link rel="stylesheet" type="text/css" href="./stylesheets/stylesheet.css">
</head>

<body>
<!--MENU-->
<div class = "menu" id = "menu" style="width: 0px;">
	<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
		<a class = "menu1" href = "aboutUs.html">About Us</a><br>
		<!--If Logged in-->
		<a class = "menu1" href = "summary.html">Summary View</a><br> <!--INCLUDES ACTIVITY SUMMARY VIEW-->
<!-- 	<a class = "menu1" href = "activitySummary.html">Activities Summary View</a><br> -->

		<a class = "menu1" href = "activityDetail.html">Activity Detail View</a><br><!--INCLUDES MAP-->
		<!-- <a class = "menu1" href = "viewMap.html">Map</a><br> -->

		<a class = "menu1" href = "forecast.html">Weather Forecast</a><br>


		<!-- <a class = "menu1" href = "viewDevices.html">Devices</a><br> -->
		<a class = "menu1" href = "registerDevice.html">Devices</a><br>
<!-- 	<a class = "menu1" href = "login.html">Login</a><br>
	    <a class = "menu1" href = "registration.html">Register</a> -->

	    <a id = "demo" class = "menu1" onclick = "logout()">Log Out</a><br>
	    <!--END-->
	    <!--If NOT Logged in-->
		<a class = "menu1" href = "login.html">Login</a><br>
	    <a class = "menu1" href = "registration.html">Register</a>
	    <!--END-->
	</div>
<!--END OF MENU-->

<div class = "bigDiv">
		<span class = "spanStyle" onclick="openNav()"><img src = "images/runningManSidebar.svg" class = "menuButtonImage2"></span>
	<div class = "bigDiv2">
		<h2 class = "subTitle">Register a Device</h2>

		<p class = "registerButtonToCenter">To register a new device, enter the device id below, and select 'register' <br> If you would like to view your devices, select "view devices" below</p>

		<form id = "registerId" onsubmit="submitRegister();return false;">
			<div class = "registerPageDiv">
				<div class = "rightColumn">
					<!--One Example for a particle device is 1e0032123447343149111039 -->
					<!--But what exactly are we putting here? -->
					<input class = "iFieldLarge" type = "text" id = "regDevice" title = "Please enter a valid device id" placeholder = "1e0032123447343149111039" required>
					
					<br>
					<div id="ifFailure"></div>
				</div>
				<div class = "leftColumn">
					Enter Device ID <br><br>
				</div>
			</div>
			<br><br><br>
			<div class = "registerButtonToCenter">
				<button id = "button" class = "registerButton"  type = "submit" value = "Register" >Register A Device</button>
				<br><br>
				<button onclick = "window.location.href='viewDevices.html'" class = "registerButton"  type = "submit" value = "Register" >View Devices</button>
			</div>
		</form>
	</div>
</div>
<script>
function openNav() { document.getElementById("menu").style.width = "250px";}

function closeNav() {document.getElementById("menu").style.width = "0";}

function logout(){document.getElementById("demo").style.color = "red";}

	var divToChange = document.getElementById("ifFailure");
	function submitRegister() {
	var deviceID = document.getElementById(".inputPassword").value;

    $.ajax({
    url: '/devices/registerDevice',
    type: 'POST',
    contentType: 'application/json',
    data: JSON.stringify({device:deviceID}),
    dataType: 'json'
    })
      .done(registerSuccess)
      .fail(registerError); 

	console.log("Sent it")

	}
	// function openNav() { document.getElementById("menu").style.width = "250px";}

	// function closeNav() {document.getElementById("menu").style.width = "0";}
/*
	function logout() {

	var ajax = new XMLHttpRequest();
	ajax.open("GET", "controller.php?action=logout", true);
	ajax.send();  // Logging out might need local storage of the login info to be cleared, not sure though
		ajax.onreadystatechange = function(){
		if(ajax.readyState==4 && ajax.status==200){
			window.location.replace("homepage.php");
		}
		}
	} */ 

</script>
</body>
</html>
